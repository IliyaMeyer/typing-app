import matplotlib.pyplot as pyplot
import numpy
from keylogger import Keylogger


class DataProcessing:

    def __init__(self, data):
        self.data = data
        self.data_no_spaces = [datum for datum in self.data if datum[0] != ' ']

    def show_graph(self):
        time_differences = numpy.diff([datum[1] for datum in self.data])
        print(len(time_differences))
        time_differences = numpy.insert(time_differences, 0, 0, axis=0)
        y = time_differences
        x = numpy.array([pair[0] for pair in enumerate(self.data)])
        print(len(self.data))
        print(x.size)
        print(y.size)
        pyplot.scatter(x, y, s=1, c=list(map(lambda datum: 'black' if datum[0] != ' ' else 'red', self.data)))
        pyplot.show()


def main():
    # keylogger = Keylogger()
    # keylogger.run_keylogger()
    data_processing = DataProcessing([('p', 4.660617351531982), ('a', 4.750441074371338), ('p', 4.871671438217163), ('e', 5.062841415405273), ('r', 5.270930290222168), (' ', 5.381289482116699), ('m', 5.627995729446411), ('i', 5.768845319747925), ('s', 5.980109214782715), ('s', 6.124705791473389), (' ', 6.345663547515869), ('t', 6.52884578704834), ('o', 6.790433645248413), ('o', 7.044992923736572), ('k', 7.242951393127441), (' ', 7.462891101837158), ('o', 7.703757286071777), ('f', 7.881647109985352), ('f', 8.066317081451416), (' ', 8.23066759109497), ('s', 8.453375816345215), ('o', 8.634804248809814), ('o', 8.863234043121338), ('n', 9.064441442489624), (' ', 9.265607833862305), ('s', 9.511767864227295), ('o', 9.716650485992432), ('m', 9.937904357910156), ('e', 10.206162929534912), ('t', 10.476198196411133), ('i', 10.674381017684937), ('m', 10.748151063919067), ('e', 10.989487886428833), ('s', 11.190804481506348), (' ', 11.358521699905396), ('g', 11.554869413375854), ('o', 11.708547830581665), (' ', 11.981049060821533), ('p', 12.232232809066772), ('e', 12.410078048706055), ('o', 12.566009759902954), ('p', 12.720205783843994), ('l', 12.81064772605896), ('e', 13.029372215270996), (' ', 13.172999382019043), ('n', 13.354140043258667), ('e', 13.5369393825531), ('e', 13.721626996994019), ('d', 13.942597150802612), (' ', 14.070741891860962), ('w', 14.231288194656372), ('e', 14.413190603256226), ('n', 14.561666011810303), ('t', 14.799943208694458), (' ', 14.950714111328125), ('i', 15.142112493515015), ('s', 15.326589584350586), (' ', 15.5494863986969), ('m', 15.754355192184448), ('u', 15.962019443511963), ('s', 16.113120317459106), ('t', 16.334579944610596), (' ', 16.54076862335205), ('u', 16.752464532852173), ('n', 16.956713676452637), ('d', 17.1275897026062), ('e', 17.308384656906128), ('r', 17.552016973495483), (' ', 17.635806798934937), ('s', 17.93430256843567), ('t', 18.11867642402649), ('a', 18.269603490829468), ('t', 18.45768642425537), ('e', 18.68713140487671), (' ', 18.875028610229492), ('l', 19.089649438858032), ('a', 19.250694751739502), ('t', 19.391852617263794), ('e', 19.665030479431152), ('r', 19.910054206848145), (' ', 20.118253231048584), ('w', 20.2383770942688), ('a', 20.400400638580322), ('s', 20.560842752456665), (' ', 20.749682188034058), ('w', 20.938063383102417), ('e', 21.162495613098145), (' ', 21.270145654678345), ('c', 21.491154193878174), ('h', 21.661107778549194), ('i', 21.85196042060852), ('l', 22.032633066177368), ('d', 22.25135326385498), ('r', 22.405415058135986), ('e', 22.583330154418945), ('n', 22.688729763031006), (' ', 22.839385509490967), ('h', 22.949951887130737), ('o', 23.03069281578064), ('m', 23.242238759994507), ('e', 23.564271211624146), (' ', 23.72022318840027), ('w', 23.864336729049683), ('a', 24.006612062454224), ('n', 24.182991981506348), ('t', 24.313839197158813), (' ', 24.414650201797485), ('w', 24.568826913833618), ('h', 24.725288152694702), ('i', 24.805081129074097), ('t', 24.946261644363403), ('e', 25.036590337753296), (' ', 25.1676926612854), ('n', 25.36529302597046), ('a', 25.499797105789185), ('m', 25.64214563369751), ('e', 25.853402853012085), (' ', 25.957332134246826), ('t', 26.165595769882202), ('h', 26.235342025756836), ('e', 26.520517110824585), ('i', 26.67673110961914), ('r', 26.897796154022217), (' ', 27.045799255371094), ('b', 27.240088939666748), ('o', 27.4578857421875), ('o', 27.6653835773468), ('k', 27.77817678451538), (' ', 27.95644235610962), ('t', 28.080019235610962), ('u', 28.191221475601196), ('r', 28.34232759475708), (' ', 28.5803005695343), ('n', 28.907328367233276), ('i', 29.121518850326538), ('g', 29.282813787460327), ('h', 29.329957962036133), ('t', 29.561460256576538), (' ', 29.59469437599182), ('l', 29.89852237701416), ('i', 30.019288778305054), ('f', 30.180564641952515), ('e', 30.280884981155396), (' ', 30.425074338912964), ('g', 31.141427278518677), ('i', 31.27522325515747), ('v', 31.376474618911743), ('e', 31.537292003631592), (' ', 31.665544748306274), ('a', 31.813655138015747), ('b', 31.971339464187622), ('o', 32.165743827819824), ('u', 32.22606015205383), ('t', 32.38396501541138), (' ', 32.50428009033203), ('w', 32.66892123222351), ('o', 32.79237985610962), ('u', 32.895268201828), ('l', 33.09324240684509), ('d', 33.2371883392334), (' ', 33.39935064315796), ('m', 33.60655951499939), ('u', 33.795873403549194), ('c', 33.914148569107056), ('h', 34.034428358078), (' ', 34.157665491104126), ('w', 34.319135904312134), ('i', 34.4298882484436), ('t', 34.57742357254028), ('h', 34.6880304813385), ('o', 34.806801557540894), ('u', 34.86763548851013), ('t', 35.032349824905396), (' ', 35.13632011413574), ('o', 35.32758569717407), ('t', 35.50149083137512), ('h', 35.62899589538574), ('e', 35.87621545791626), ('r', 36.1002242565155), (' ', 36.22108840942383), ('s', 36.40212607383728), ('e', 36.57989525794983), ('t', 36.80978465080261), (' ', 36.9705126285553), ('w', 37.261924743652344), ('h', 37.36979794502258), ('e', 37.49411725997925), ('n', 37.601322650909424), (' ', 37.68213748931885), ('a', 37.867852449417114), ('r', 38.05232262611389), ('e', 38.189894914627075), (' ', 38.32063579559326), ('m', 38.491756200790405), ('e', 38.63254404067993), (' ', 38.78872632980347), ('s', 39.48307800292969), ('t', 39.656845808029175), ('o', 39.792813777923584), ('r', 39.940858364105225), ('y', 40.082353830337524), (' ', 40.18695855140686), ('i', 40.36665415763855), ('n', 40.454039573669434), ('t', 40.665464639663696), ('o', 40.84458541870117), (' ', 40.961790800094604), ('s', 41.11619710922241), ('a', 41.263978242874146), ('m', 41.42803502082825), ('e', 41.57930088043213), (' ', 41.68978309631348), ('o', 41.90642523765564), ('l', 42.14843940734863), ('d', 42.35609579086304), (' ', 42.52019429206848), ('e', 42.74136400222778), ('n', 42.867039918899536), ('o', 43.075255393981934), ('u', 43.148650884628296), ('g', 43.37723731994629), ('h', 43.450628995895386), (' ', 43.68220806121826), ('p', 43.858193159103394), ('l', 44.02915072441101), ('a', 44.2474889755249), ('y', 44.41166043281555), (' ', 44.50922155380249), ('t', 44.70029282569885), ('h', 44.84944796562195), ('i', 44.95680642127991), ('s', 45.19859004020691), (' ', 45.28866624832153), ('h', 45.48025321960449), ('a', 45.630961894989014), ('n', 45.785385847091675), ('d', 45.978944063186646), (' ', 46.09216260910034), ('h', 46.28012561798096), ('e', 46.43122959136963), ('r', 46.61554837226868), (' ', 46.7128791809082), ('a', 47.03992509841919), ('g', 47.18041443824768), ('a', 47.33440899848938), ('i', 47.52607989311218), ('n', 47.57652020454407), (' ', 47.67355227470398), ('t', 47.83454155921936), ('h', 47.98064613342285), ('i', 48.21541404724121), ('n', 48.4869704246521), ('k', 48.617419481277466), (' ', 48.74569654464722), ('i', 48.934794902801514), ('d', 49.035104751586914), ('e', 49.18956112861633), ('a', 49.304028272628784), (' ', 49.3873176574707), ('p', 49.59910774230957), ('l', 49.68624210357666), ('n', 49.94279503822327), ('t', 50.113868951797485), (' ', 50.36872363090515), ('t', 50.55654740333557), ('r', 50.74105739593506), ('e', 50.82845950126648), ('e', 51.06498837471008), (' ', 51.21598267555237), ('h', 51.49772810935974), ('i', 51.587854862213135), ('m', 51.76986527442932), (' ', 51.94354557991028), ('w', 52.04877161979675), ('o', 52.176910400390625), ('r', 52.300835371017456), ('l', 52.38824796676636), ('d', 52.55942344665527), (' ', 52.73343896865845), ('k', 52.95469880104065), ('i', 53.181350231170654), ('n', 53.24855875968933), ('d', 53.44961905479431), (' ', 53.53007102012634), ('i', 53.83527612686157), ('n', 53.91312217712402), (' ', 54.0283625125885), ('p', 54.17216920852661), ('l', 54.28300142288208), ('a', 54.34337663650513), ('c', 54.52148938179016), ('e', 54.57161521911621), (' ', 54.71557545661926), ('s', 54.83341717720032), ('a', 55.29130530357361), ('w', 55.44190001487732), (' ', 55.59293508529663), ('n', 55.76373219490051), ('u', 55.84417152404785), ('m', 56.03063654899597), ('b', 56.134514570236206), ('e', 56.332722425460815), ('r', 56.44330191612244), (' ', 56.563722372055054), ('a', 57.273507833480835), ('n', 57.41768956184387), ('i', 57.53493809700012), ('m', 57.69600772857666), ('a', 57.877346992492676), ('l', 58.02808475494385), (' ', 58.104146003723145), ('c', 58.27775716781616), ('h', 58.40545058250427), ('i', 58.485514879226685), ('l', 58.576618671417236), ('d', 58.62684464454651), ('r', 58.81765961647034), ('e', 58.989033937454224), ('n', 59.10789155960083), (' ', 59.23899698257446), ('o', 59.397395849227905), ('n', 59.48753499984741), ('c', 59.61799740791321), ('e', 59.64828824996948), (' ', 59.731812715530396), ('a', 59.90981674194336), ('r', 60.03364944458008), ('e', 60.15748476982117), (' ', 60.259610176086426), ('e', 60.421828746795654), ('x', 60.63876676559448), ('a', 60.77340483665466), ('m', 60.860777616500854), ('p', 60.93153619766235), ('l', 60.9647171497345), ('e', 61.08985161781311), (' ', 61.22755742073059), ('t', 61.38903737068176), ('h', 61.509904623031616), ('e', 61.64344763755798), (' ', 61.80455160140991), ('h', 61.98537826538086), ('a', 62.10140299797058), ('s', 62.23964810371399), (' ', 62.33999800682068), ('s', 62.56218504905701), ('e', 62.69507956504822), ('a', 62.84234666824341), (' ', 62.973586320877075), ('o', 63.152886629104614), ('p', 63.24359178543091), ('e', 63.398396492004395), ('n', 63.51192545890808), (' ', 63.6233286857605), ('a', 63.773075103759766), ('b', 63.90446424484253), ('o', 63.967668533325195), ('u', 64.09509253501892), ('t', 64.2548885345459), (' ', 64.4087963104248), ('m', 64.6035385131836), ('a', 64.7577896118164), ('n', 64.86822295188904), ('y', 65.08617544174194), (' ', 65.3466362953186)])
    # print(keylogger.screen_input)
    data_processing.show_graph()


if __name__ == '__main__':
    main()
